PIC EQU 20H
EOI EQU 20H
TIMER EQU 10H
N_F10 EQU 10
N_CLK EQU 11
MASC_F10 EQU 11111110B
MASC_TIMER_F10 EQU 11111100B

ORG 40
IP_F10 DW RUT_F10
ORG 44
IP_TIMER DW RUT_TIMER

ORG 1000H 
SEGUNDOS DB 0
FINAL DB 30

ORG 3000H
RUT_TIMER: INC CX
MOV AL, 0
OUT TIMER, AL
MOV AL, EOI
OUT EOI, AL
IRET

ORG 3500h
INICIALIZAR: MOV CX, 0
CLI
MOV AL, MASC_F10
OUT PIC+1, AL
STI
RET

ORG 4000H
RUT_F10: MOV AL, 0
OUT TIMER,AL
MOV AL, EOI
OUT EOI, AL
IRET

ORG 2000H
CLI
MOV AL, MASC_TIMER_F10
OUT PIC+1, AL 
MOV AL, N_F10
OUT PIC+4, AL
MOV AL, N_CLK
OUT PIC+5, AL
MOV AL, 1
OUT TIMER+1, AL
STI
CALL INICIALIZAR
LOOP:CMP CX, FINAL
JNZ LOOP
INT 0 
END
